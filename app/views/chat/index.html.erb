<section style="background-color: #eee;" data-controller='chat' data-chatroom-id="<%= @chatroom.id %>">
  <div class="container py-5">
    <div class="row d-flex justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-6">
        <div class="card" id="chat2">
          <div class="card-header d-flex justify-content-between align-items-center p-3">
            <h5 class="mb-0">Chat</h5>
          </div>
          <div class="card-body" data-mdb-perfect-scrollbar="true" style="position: relative;">
            <div class="chat-messages-container">
              <div>
                <div class="container d-grid flex-col-reverse mt-4 rounded">
                  <div data-reflex="click->chat#update_messages" data-other_user_id="<%= @other_user.id %>">
                  </div>
                  <% messages.each do |message| %>
                    <div class="message <%= message.sent_by?(current_user) ? 'sent' : 'received' %>">
                      <p><%= message.message %></p>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>
          </div>

          <%= form_with model: @message do |form| %>
            <div class="card-footer text-muted">
              <%= form.text_area :message, class: "form-control form-control-lg", placeholder: 'Type Message', data: { 'chat-target': '                    message', controller: 'chat'} %>
              <div class="mt-3 d-grid">
                <%= form.submit "Message", data: { action: "click->chat#create_message", other_user_id:  @other_user.id}, class: 'btn btn-primary btn-' %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Your existing view code -->

<style>
#chat2 .card-body {
  position: relative;
  max-height: fit-content;
  height: 400px;
  overflow: auto;
}

/* Wrapper for chat messages */
.chat-messages-container {
  margin: 0 auto; /* Center the container within the parent */
}

/* Style for sent messages */
.sent p {
  float: right; /* Align sent messages to the right side */
  padding: 5px 10px;
  border-radius: 10px;
  background-color: #e0f2f1;
  margin: 10px 0;
}

/* Style for received messages */
.received p {
  float: left; /* Align received messages to the left side */
  padding: 5px 10px;
  border-radius: 10px;
  background-color: #f5f5f5;
  margin: 10px 0;
}
</style>
